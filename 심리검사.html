<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>이미지 선택 심리 테스트 🎨</title>
    <!-- Tailwind CSS CDN 로드 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-blue': '#4F46E5',
                        'secondary-green': '#10B981',
                        'bg-light': '#F9FAFB',
                    },
                }
            }
        }
    </script>
    <style>
        /* 기본 폰트 설정 */
        body { font-family: 'Inter', sans-serif; }
        /* 퀴즈 영역을 위한 부드러운 전환 효과 */
        .quiz-transition {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
        }
        /* 이미지 선택지 컨테이너 스타일 */
        .image-option-container {
            cursor: pointer;
            border: 3px solid transparent;
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        .image-option-container:hover {
            border-color: #A5B4FC; /* Indigo-300 */
        }
        .image-option-container.selected {
            border-color: #4F46E5; /* primary-blue */
            box-shadow: 0 5px 15px rgba(79, 70, 229, 0.3);
            transform: scale(1.02);
        }
        .image-option-container img {
            width: 100%;
            height: auto;
            display: block;
        }
    </style>
</head>
<body class="bg-bg-light min-h-screen flex items-center justify-center p-4">

    <div id="app" class="w-full max-w-lg bg-white rounded-xl shadow-2xl p-6 md:p-8">

        <h1 class="text-3xl font-extrabold text-primary-blue text-center mb-6 border-b pb-4">
            나만의 이미지 선택 심리 테스트 🎨
        </h1>

        <!-- 퀴즈 영역 -->
        <div id="quiz-container" class="quiz-transition">
            <p id="question-index" class="text-sm font-semibold text-gray-500 mb-2"></p>
            <h2 id="question-text" class="text-xl font-bold text-gray-800 mb-6"></h2>
            
            <!-- 이미지 선택지를 표시할 그리드 컨테이너 -->
            <div id="options-container" class="grid grid-cols-2 gap-4">
                <!-- 이미지 옵션들이 여기에 동적으로 추가됩니다 -->
            </div>

            <!-- 다음 버튼 -->
            <button id="next-button" 
                    class="mt-8 w-full py-3 bg-secondary-green text-white font-bold rounded-lg shadow-md hover:bg-emerald-600 transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed"
                    disabled>
                다음 질문으로
            </button>
        </div>

        <!-- 결과 영역 (초기 숨김) -->
        <div id="result-container" class="quiz-transition opacity-0 hidden transform scale-95 text-center p-6 bg-primary-blue/5 rounded-lg">
            <h2 class="text-2xl font-bold text-primary-blue mb-4">테스트 결과 🎉</h2>
            <p id="result-title" class="text-3xl font-extrabold text-secondary-green mb-4"></p>
            <p id="result-description" class="text-gray-700 mb-8 leading-relaxed"></p>

            <button id="restart-button" 
                    class="w-full py-3 bg-primary-blue text-white font-bold rounded-lg shadow-md hover:bg-indigo-600 transition duration-150">
                다시 테스트하기
            </button>
        </div>
    </div>

    <script>
        // 심리 테스트 데이터 (질문, 이미지 선택지, 점수)
        // 이미지는 placehold.co 서비스를 이용하여 간단한 텍스트와 색상으로 대체되었습니다.
        // 실제 이미지 URL로 대체 가능합니다.
        const quizData = [
            {
                question: "1. 주말, 당신이 가장 끌리는 풍경을 선택하세요.",
                options: [
                    { text: "고요한 숲길", score: 1, imgUrl: "https://placehold.co/400x250/10B981/ffffff?text=고요한+숲길", category: 'NATURE' },
                    { text: "활기찬 도시 거리", score: 5, imgUrl: "https://placehold.co/400x250/4F46E5/ffffff?text=활기찬+도시+거리", category: 'URBAN' },
                ]
            },
            {
                question: "2. 당신의 영혼을 위로하는 빛은 무엇인가요?",
                options: [
                    { text: "어두운 방의 촛불 (깊은 사색)", score: 1, imgUrl: "https://placehold.co/400x250/374151/FBBF24?text=어두운+방의+촛불", category: 'CALM' },
                    { text: "태양 아래 밝은 햇살 (넘치는 에너지)", score: 5, imgUrl: "https://placehold.co/400x250/FBBF24/000000?text=태양+아래+밝은+햇살", category: 'VIVID' },
                ]
            },
            {
                question: "3. 당신이 오늘 가장 갖고 싶은 물건은?",
                options: [
                    { text: "낡고 두꺼운 책 (지식과 경험)", score: 1, imgUrl: "https://placehold.co/400x250/9CA3AF/ffffff?text=낡고+두꺼운+책", category: 'KNOWLEDGE' },
                    { text: "오래된 열쇠 (새로운 탐험)", score: 5, imgUrl: "https://placehold.co/400x250/DC2626/ffffff?text=오래된+열쇠", category: 'EXPLORE' },
                ]
            }
        ];

        // DOM 요소 가져오기
        const quizContainer = document.getElementById('quiz-container');
        const resultContainer = document.getElementById('result-container');
        const questionIndexElement = document.getElementById('question-index');
        const questionTextElement = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const resultTitleElement = document.getElementById('result-title');
        const resultDescriptionElement = document.getElementById('result-description');
        const restartButton = document.getElementById('restart-button');

        // 상태 변수
        let currentQuestionIndex = 0;
        let totalScore = 0;
        let selectedScore = null;

        // 테스트 시작 및 초기화
        function initializeQuiz() {
            currentQuestionIndex = 0;
            totalScore = 0;
            selectedScore = null;
            
            // 화면 전환 애니메이션 (결과 -> 퀴즈)
            resultContainer.classList.add('opacity-0', 'hidden', 'scale-95');
            quizContainer.classList.remove('hidden', 'opacity-0', 'scale-95');
            quizContainer.classList.add('opacity-100', 'scale-100');

            loadQuestion();
        }

        // 질문 로드
        function loadQuestion() {
            if (currentQuestionIndex >= quizData.length) {
                showResult();
                return;
            }

            const currentQuiz = quizData[currentQuestionIndex];
            
            // UI 업데이트
            questionIndexElement.textContent = `Question ${currentQuestionIndex + 1} / ${quizData.length}`;
            questionTextElement.textContent = currentQuiz.question;
            optionsContainer.innerHTML = '';
            nextButton.disabled = true;
            selectedScore = null; // 선택 점수 초기화

            // 이미지 선택지 생성
            currentQuiz.options.forEach((option, index) => {
                const optionContainer = document.createElement('div');
                optionContainer.className = 'image-option-container';
                optionContainer.dataset.score = option.score;
                optionContainer.dataset.index = index;

                // 이미지 요소
                const img = document.createElement('img');
                img.src = option.imgUrl;
                img.alt = option.text;
                // 이미지 로드 오류 방지 (CSS로 이미지를 숨기고 텍스트만 보이게 처리)
                img.onerror = function() {
                    this.style.display = 'none';
                    const fallbackText = document.createElement('div');
                    fallbackText.textContent = option.text + ' (Image not loaded)';
                    fallbackText.className = 'p-4 text-center text-red-500 font-semibold';
                    optionContainer.appendChild(fallbackText);
                };

                // 캡션/설명 텍스트
                const caption = document.createElement('p');
                caption.textContent = option.text;
                caption.className = 'p-2 text-center text-sm font-medium text-gray-700 bg-gray-50';
                
                optionContainer.appendChild(img);
                optionContainer.appendChild(caption);
                
                optionContainer.addEventListener('click', () => selectOption(optionContainer, option.score));
                optionsContainer.appendChild(optionContainer);
            });
        }

        // 선택지 선택 처리
        function selectOption(selectedContainer, score) {
            // 모든 선택지 컨테이너의 스타일 초기화
            document.querySelectorAll('.image-option-container').forEach(container => {
                container.classList.remove('selected');
            });

            // 선택된 컨테이너 스타일 적용
            selectedContainer.classList.add('selected');

            selectedScore = score;
            nextButton.disabled = false; // 다음 버튼 활성화
        }

        // 다음 버튼 클릭 처리
        function handleNext() {
            if (selectedScore !== null) {
                totalScore += selectedScore;
                currentQuestionIndex++;
                loadQuestion();
            }
        }

        // 결과 화면 표시
        function showResult() {
            // 화면 전환 애니메이션 (퀴즈 -> 결과)
            quizContainer.classList.add('opacity-0', 'scale-95');
            quizContainer.addEventListener('transitionend', () => {
                quizContainer.classList.add('hidden');
                resultContainer.classList.remove('hidden');
                // 결과 영역을 화면에 나타나게 함
                setTimeout(() => {
                    resultContainer.classList.remove('opacity-0', 'scale-95');
                    resultContainer.classList.add('opacity-100', 'scale-100');
                }, 10); // 작은 지연을 주어 트랜지션을 보장

                displayResultText(totalScore);
            }, { once: true });
        }

        // 점수에 따른 결과 텍스트 표시 (총점 3~15점)
        function displayResultText(score) {
            let title = '';
            let description = '';

            if (score >= 11) {
                // 11~15점: 활동가 / 외부 지향
                title = "✨ 역동적인 탐험가 유형";
                description = "당신은 외부 세계의 에너지와 자극을 선호하며, 새로운 경험과 도전을 통해 성장하는 타입입니다. 활동적인 환경에서 빛을 발하며, 호기심이 많고 적극적으로 삶을 개척합니다. 당신에게는 '활기찬 도시 거리', '태양 아래 밝은 햇살', '오래된 열쇠'와 같은 역동적인 이미지가 강하게 끌립니다.";
            } else if (score >= 6) {
                // 6~10점: 균형 / 중도 지향
                title = "🌿 유연한 균형주의자 유형";
                description = "당신은 내부와 외부의 균형을 중시합니다. 때로는 조용한 사색을 즐기지만, 필요할 때는 활발한 활동에 참여할 줄 아는 유연성을 가졌습니다. 상황에 따라 다양한 이미지를 포용할 수 있는 조화로운 성향입니다.";
            } else {
                // 3~5점: 사색가 / 내부 지향
                title = "📚 고요한 사색가 유형";
                description = "당신은 조용하고 안정적인 환경에서 가장 큰 편안함을 느낍니다. 내면의 깊은 생각과 감정에 집중하며, 외부의 소란스러움보다 고독 속에서 지혜를 찾습니다. 당신에게는 '고요한 숲길', '어두운 방의 촛불', '낡고 두꺼운 책'과 같은 차분한 이미지가 마음의 안정을 줍니다.";
            }

            resultTitleElement.textContent = title;
            resultDescriptionElement.textContent = description;
        }

        // 이벤트 리스너 설정
        nextButton.addEventListener('click', handleNext);
        restartButton.addEventListener('click', initializeQuiz);

        // 앱 시작
        initializeQuiz();

    </script>
</body>
</html>
